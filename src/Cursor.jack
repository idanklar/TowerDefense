// Player-controlled cursor for placing towers
class Cursor {

    field int x, y;
    field int prevX, prevY;

    constructor Cursor new(int sx, int sy) {
        let x = sx;
        let y = sy;
        let prevX = sx;
        let prevY = sy;
        return this;
    }

    // Moves cursor using arrow keys
    method void move(int key) {
        let prevX = x;
        let prevY = y;

        if (key = 130) { let y = y - 1; } // up
        if (key = 131) { let y = y + 1; } // down
        if (key = 132) { let x = x - 1; } // left
        if (key = 133) { let x = x + 1; } // right

        return;
    }

    // Draw cursor
    method void draw() {
        do Screen.setColor(true);
        do Screen.drawRectangle(
            x * 16 + 4, y * 16 + 4,
            x * 16 + 11, y * 16 + 11
        );
        return;
    }

    // Erase cursor
    method void erase(boolean onPath) {
        do Screen.setColor(onPath);
        do Screen.drawRectangle(
            prevX * 16, prevY * 16,
            prevX * 16 + 15, prevY * 16 + 15
        );
        return;
    }

    method int getX() { return x; }
    method int getY() { return y; }
    method int getPrevX() { return prevX; }
    method int getPrevY() { return prevY; }
}
